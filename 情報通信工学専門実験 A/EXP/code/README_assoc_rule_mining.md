# 相関ルールマイニング (Association Rule Mining)

このプログラムは、Aprioriアルゴリズムを用いて相関ルールマイニングを実行するC#プログラムです。

## 機能

- CSVファイルからトランザクションデータを読み込み
- Aprioriアルゴリズムによる頻出アイテム集合の抽出
- 相関ルールの生成（支持度、信頼度、リフト値の計算）
- 結果をCSVファイルに出力

## 使用方法

### コンパイル

```bash
mcs assoc-rule-mining.cs -out:assoc-rule-mining.exe
```

### 実行

```bash
mono assoc-rule-mining.exe <入力ファイル> <出力ファイル>
```

例：
```bash
mono assoc-rule-mining.exe data/shopping_transactions.csv output/assoc_rules_output.csv
```

## 入力ファイル形式

入力ファイルは、各行が1つのトランザクション（購入セット）を表すCSVファイルです。
各トランザクションは、カンマ区切りでそのトランザクションに含まれるアイテムを列挙します。

例：
```
パン,牛乳
パン,卵,牛乳
ビール,おむつ
```

## 出力ファイル形式

出力ファイルは、抽出された相関ルールを以下の列を持つCSVファイルとして保存します：

- Antecedent: 前提部（アイテムの組み合わせ）
- Consequent: 帰結部（アイテムの組み合わせ）
- Support: 支持度（両者が同時に出現する確率）
- Confidence: 信頼度（前提部が出現した時に帰結部も出現する条件付き確率）
- Lift: リフト値（ルールの重要性を示す指標、1より大きいほど有意）

## パラメータ設定

プログラム内で以下のパラメータを設定できます：

- MIN_SUPPORT: 最小支持度（デフォルト: 0.1 = 10%）
- MIN_CONFIDENCE: 最小信頼度（デフォルト: 0.5 = 50%）
- MIN_LIFT: 最小リフト値（デフォルト: 1.0）

これらの値を変更することで、抽出されるルールの数と質を調整できます。

## アルゴリズムの概要

1. トランザクションデータを読み込み
2. 頻出1-アイテム集合（L1）を生成
3. L(k-1)からL(k)を生成（Aprioriの候補生成とプルーニング）
4. すべての頻出アイテム集合から相関ルールを生成
5. 最小信頼度と最小リフト値でフィルタリング
6. 結果を信頼度の降順でソートして出力

## 注意点

- 大量のトランザクションデータや多数のユニークアイテムがある場合、メモリ消費量が増大する可能性があります
- ルール数は最小支持度と最小信頼度の設定に大きく依存します 